<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdownæ ¼å¼æµ‹è¯•</title>
    <link rel="stylesheet" href="frontend/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ Markdownæ ¼å¼æµ‹è¯•</h1>
        </div>
        
        <div class="chat-container">
            <div class="chat-messages">
                <div class="message assistant-message">
                    <div class="message-content" id="test-content">
                        <!-- è¿™é‡Œä¼šæ˜¾ç¤ºæµ‹è¯•å†…å®¹ -->
                    </div>
                </div>
            </div>
        </div>
        
        <button onclick="testMarkdown()">æµ‹è¯•Markdownæ ¼å¼</button>
    </div>

    <script>
        // å¤åˆ¶formatTextå‡½æ•°è¿›è¡Œæµ‹è¯•
        function formatText(text) {
            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*([^*]+)\*/g, '<em>$1</em>')
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;")
                .replace(/&lt;strong&gt;/g, '<strong>')
                .replace(/&lt;\/strong&gt;/g, '</strong>')
                .replace(/&lt;em&gt;/g, '<em>')
                .replace(/&lt;\/em&gt;/g, '</em>')
                .replace(/\n/g, '<br>')
                .replace(/^(\d+\.\s)/gm, '<strong>$1</strong>')
                .replace(/^(-\s)/gm, '&nbsp;&nbsp;<strong>â€¢</strong> ')
                .replace(/â€¢/g, '<strong>â€¢</strong>')
                .replace(/(<br>\s*){2,}/g, '<br><br>');
        }

        function testMarkdown() {
            const testText = `**é‡è¦æé†’**ï¼šæ‚¨çš„è¡€ç³–æ•°å€¼æ­£å¸¸ï¼

æ ¹æ®åˆ†æï¼š
1. **å½“å‰çŠ¶æ€**ï¼šè¡€ç³–åœ¨æ­£å¸¸èŒƒå›´å†…
2. **å»ºè®®äº‹é¡¹**ï¼šç»§ç»­ä¿æŒè‰¯å¥½ä¹ æƒ¯

**æ³¨æ„**ï¼š
- *é€‚å½“è¿åŠ¨*æœ‰åŠ©äºè¡€ç³–ç¨³å®š
- *è§„å¾‹ä½œæ¯*åŒæ ·é‡è¦

**æ‚¨æ˜¯å¦éœ€è¦æ›´å¤šå»ºè®®ï¼Ÿ**`;

            const formatted = formatText(testText);
            document.getElementById('test-content').innerHTML = formatted;
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = testMarkdown;
    </script>
</body>
</html>